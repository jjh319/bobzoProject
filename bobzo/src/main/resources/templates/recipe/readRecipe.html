<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>게시글 상세 페이지</title>
</head>
<body>
<h1>게시글 상세 내용</h1>
<p>게시글 번호: <span th:text="${recipe.num}"></span></p>
<p>게시글 제목: <span th:text="${recipe.title}"></span></p>
<p>작성자: <span th:text="${recipe.fkUsers.nickName}"></span></p>
<p>작성 날짜: <span th:text="${#dates.format(recipe.createDate, 'yyyy-MM-dd HH:mm:ss')}"></span></p>
<p>카테고리: <span th:if="${recipe.fkCategories != null}" th:text="${recipe.fkCategories.name}"></span></p>
<p>조회수: <span th:text="${recipe.cnt}"></span></p>
<p>게시글 내용: <span th:text="${recipe.content}"></span></p>
<br>
<br>
<br>
<br>

<a th:href="@{'/recipe/edit/' + ${recipe.num}}">Edit Recipe</a>

<h2>댓글</h2>
<ul>
    <li th:each="comment : ${comments}">
        <p>
            작성자: <span th:text="${comment.fkUsers.nickName}"></span><br>
            작성일시: <span th:text="${#dates.format(comment.createDate, 'yyyy-MM-dd HH:mm:ss')}"></span><br>
            내용: <span th:text="${comment.comments}"></span>

            <!-- 댓글 수정 버튼 -->
            <a th:href="@{'/recipe/updateComment/' + ${comment.num}}">Edit</a>

        <!-- 댓글 삭제 버튼 -->
        <form th:action="@{'/recipe/deleteComment/' + ${comment.num}}" method="post">
            <button type="submit">Delete</button>
        </form>
        </p>
    </li>
</ul>
<form th:action="@{'/recipe/addComment/' + ${recipe.num}}" method="post">
    <textarea name="comment" rows="4" cols="50"></textarea>
    <input type="submit" value="댓글 추가">
</form>
</body>
</html>